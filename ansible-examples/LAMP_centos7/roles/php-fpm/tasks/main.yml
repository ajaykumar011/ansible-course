---
  - name: enable remi-php74
    shell: yum-config-manager --enable remi-php74

  - name: Install php-fpm and deps
    yum: 
      name: ['php', 'php-fpm', 'php-mbstring', 'php-mysql', 'php-xml']
      state: present
    
  - name: Checking the php version
    shell: php --version  #we can also use command: php --version both are same
    register: result
  - debug:
      var: result


  - name: Disable default pool
    command: mv /etc/php-fpm.d/www.conf /etc/php-fpm.d/www.disabled creates=/etc/php-fpm.d/www.disabled
    notify: restart php-fpm

  - name: Copy php-fpm configuration
    template: src=wordpress.conf dest=/etc/php-fpm.d/
    notify: restart php-fpm
